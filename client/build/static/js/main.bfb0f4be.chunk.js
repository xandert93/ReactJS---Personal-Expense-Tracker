(this["webpackJsonpexpense-tracker"]=this["webpackJsonpexpense-tracker"]||[]).push([[0],{26:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n(19),s=n.n(c),i=(n(26),n(6)),o={isLoading:!0,transactions:[],errMsg:""},u=Object(r.createContext)(o),j=function(){var e=Object(r.useContext)(u).addTransaction,t="",n=Object(r.useState)(t),c=Object(i.a)(n,2),s=c[0],o=c[1],j=Object(r.useState)(t),l=Object(i.a)(j,2),d=l[0],p=l[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{children:"Add new transaction"}),Object(a.jsxs)("form",{onSubmit:function(n){if(n.preventDefault(),s.trim()===t||d.trim()===t)alert("Please detail your transaction");else{var a={id:Math.floor(1e6*Math.random()),description:s,amount:+d};e(a),o(t),p(t)}},children:[Object(a.jsx)("div",{className:"form-control",children:Object(a.jsxs)("label",{children:["Transaction:",Object(a.jsx)("input",{value:s,onChange:function(e){return o(e.target.value)},placeholder:"Enter transaction description..."})]})}),Object(a.jsx)("div",{className:"form-control",children:Object(a.jsxs)("label",{children:["Amount:",Object(a.jsx)("input",{className:d===t?null:"-"===d[0]?"minus":"plus",type:"number",step:".01",value:d,onChange:function(e){return p(e.target.value)},placeholder:"Enter amount..."})]})}),Object(a.jsx)("input",{type:"submit",className:"btn",value:"Add transaction"})]})]})};function l(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var d=function(){var e=Object(r.useContext)(u).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h4",{children:"Your Balance"}),Object(a.jsxs)("h1",{children:["\xa3",l(e)]})]})},p=function(e){var t=e.children;return Object(a.jsx)("h2",{children:t})},O=function(){var e=Object(r.useContext)(u).transactions.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),n=e.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0).toFixed(2);return Object(a.jsxs)("div",{className:"inc-exp-container",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:"Income"}),Object(a.jsxs)("p",{className:"money plus",children:["+\xa3",l(t)]})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:"Expense"}),Object(a.jsxs)("p",{className:"money minus",children:["-\xa3",l(n)]})]})]})},b=function(e){var t=e.transaction,n=Object(r.useContext)(u).deleteTransaction,c=t._id,s=t.description,i=t.amount,o=i<0?"-":"+";return Object(a.jsxs)("li",{className:i<0?"minus":"plus",children:[s,Object(a.jsxs)("span",{children:[o,"\xa3",l(Math.abs(i))]}),Object(a.jsx)("button",{className:"delete-btn",onClick:function(){return n(c)},children:"x"})]})},x=function(){var e=Object(r.useContext)(u),t=e.transactions,n=e.getTransactions;return Object(r.useEffect)((function(){n()}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{children:"History"}),Object(a.jsx)("ul",{className:"list",children:t.map((function(e){return Object(a.jsx)(b,{transaction:e},e._id)}))})]})},h=n(2),f=n(4),m=n.n(f),v=n(8),T=n(9),N=n.n(T),y=n(20),A=function(e,t){switch(t.type){case"SET_ISLOADING":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0});case"GET_TRANSACTIONS":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1,transactions:t.payload});case"ADD_TRANSACTION":return Object(h.a)(Object(h.a)({},e),{},{transactions:[].concat(Object(y.a)(e.transactions),[t.payload])});case"DELETE_TRANSACTION":return Object(h.a)(Object(h.a)({},e),{},{transactions:e.transactions.filter((function(e){return e._id!==t.payload}))});case"TRANSACTIONS_ERR":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1,errMsg:t.payload});default:return e}},S={isLoading:!0,transactions:[],errMsg:""},E=function(e){var t=e.children,n=Object(r.useReducer)(A,S),c=Object(i.a)(n,2),s=c[0],o=c[1],j=function(){var e=Object(v.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"SET_ISLOADING"}),e.prev=1,e.next=4,N.a.get("/api/v1/transactions");case 4:t=e.sent,n=t.data.data,o({type:"GET_TRANSACTIONS",payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"SET_ISLOADING"}),e.prev=1,e.next=4,N.a.delete("/api/v1/transactions/".concat(t));case 4:200===e.sent.status&&o({type:"DELETE_TRANSACTION",payload:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(v.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"SET_ISLOADING"}),n={"Content-Type":"application/json"},e.prev=2,e.next=5,N.a.post("/api/v1/transactions",t,n);case 5:a=e.sent,r=a.data.data,o({type:"ADD_TRANSACTION",payload:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o({type:"TRANSACTION_ERROR",payload:e.t0.response.data.error});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(u.Provider,{value:Object(h.a)(Object(h.a)({},s),{},{getTransactions:j,deleteTransaction:l,addTransaction:d}),children:t})};var R=function(){return Object(a.jsxs)(E,{children:[Object(a.jsx)(p,{children:"Expense Tracker"}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(d,{}),Object(a.jsx)(O,{}),Object(a.jsx)(x,{}),Object(a.jsx)(j,{})]})]})};s.a.render(Object(a.jsx)(R,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.bfb0f4be.chunk.js.map